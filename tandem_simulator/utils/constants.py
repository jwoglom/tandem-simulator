"""Constants for Tandem pump BLE communication.

This module defines all UUIDs, service identifiers, and protocol constants
used in the Tandem pump BLE protocol.
"""

# BLE Service UUIDs
PUMP_SERVICE_UUID = "0000fdfb-0000-1000-8000-00805f9b34fb"
DEVICE_INFO_SERVICE_UUID = "0000180A-0000-1000-8000-00805f9b34fb"
GENERIC_ACCESS_SERVICE_UUID = "00001800-0000-1000-8000-00805f9b34fb"
GENERIC_ATTRIBUTE_SERVICE_UUID = "00001801-0000-1000-8000-00805f9b34fb"

# Pump Service Characteristic UUIDs
CURRENT_STATUS_CHAR_UUID = "7B83FFF6-9F77-4E5C-8064-AAE2C24838B9"
QUALIFYING_EVENTS_CHAR_UUID = "7B83FFF7-9F77-4E5C-8064-AAE2C24838B9"
HISTORY_LOG_CHAR_UUID = "7B83FFF8-9F77-4E5C-8064-AAE2C24838B9"
AUTHORIZATION_CHAR_UUID = "7B83FFF9-9F77-4E5C-8064-AAE2C24838B9"
CONTROL_CHAR_UUID = "7B83FFFC-9F77-4E5C-8064-AAE2C24838B9"
CONTROL_STREAM_CHAR_UUID = "7B83FFFD-9F77-4E5C-8064-AAE2C24838B9"

# Device Information Service Characteristic UUIDs
MANUFACTURER_NAME_CHAR_UUID = "00002A29-0000-1000-8000-00805f9b34fb"
MODEL_NUMBER_CHAR_UUID = "00002A24-0000-1000-8000-00805f9b34fb"
SERIAL_NUMBER_CHAR_UUID = "00002a25-0000-1000-8000-00805f9b34fb"
SOFTWARE_REVISION_CHAR_UUID = "00002a28-0000-1000-8000-00805f9b34fb"

# Generic Access Service Characteristic UUIDs
DEVICE_NAME_CHAR_UUID = "00002a00-0000-1000-8000-00805f9b34fb"
APPEARANCE_CHAR_UUID = "00002a01-0000-1000-8000-00805f9b34fb"
PREFERRED_CONNECTION_PARAMS_CHAR_UUID = "00002a04-0000-1000-8000-00805f9b34fb"
CENTRAL_ADDRESS_RESOLUTION_CHAR_UUID = "00002aa6-0000-1000-8000-00805f9b34fb"

# Generic Attribute Service Characteristic UUIDs
SERVICE_CHANGED_CHAR_UUID = "00002A05-0000-1000-8000-00805F9B34FB"

# Device Information
MANUFACTURER_NAME = "Tandem Diabetes Care"
MODEL_NUMBER = "Mobi"
DEFAULT_SERIAL_NUMBER = "00000000"
SOFTWARE_REVISION = "7.7.1"

# Device Name
DEVICE_NAME_PREFIX = "tslim X2"

# Protocol Constants
MESSAGE_HEADER_SIZE = 3  # bytes (opcode, transaction ID, payload length)
HMAC_SIZE = 24  # bytes for signed messages
DEFAULT_CHUNK_SIZE = 18  # bytes
CONTROL_CHUNK_SIZE = 40  # bytes

# Advertisement Constants
ADVERTISEMENT_TYPE = "peripheral"
ADVERTISEMENT_LOCAL_NAME = f"{DEVICE_NAME_PREFIX} {DEFAULT_SERIAL_NUMBER}"
